{% set _menu_active = 'compte' %}
{% extends 'base.html.twig' %}

{% block body %}
    <table class="table table-striped table-condensed">
        <thead>
            <tr>
                <th></th>
                <th>Pr√©nom</th>
                <th>Nom</th>
                <th>Tags</th>
                <th>Actif</th>
                <th class="text-center">Contrats/Passages</th>
            </tr>
        </thead>
        <tbody>
            {% for compte in comptes %}
                <tr>
                    <td><span class="glyphicon glyphicon-user" style="color: {{ compte.couleur }};"></span></td>
                    <td>{{ compte.prenom }}</td>
                    <td>{{ compte.nom }}</td>
                    <td>{% for tag in compte.tags %}{{ tag.nom~" " }}{% endfor %}</td>
                    <td><input class="switcher" type="checkbox" data-size="mini" data-url="{{ path('compte_update_etat', {id: compte.id }) }}" value="{{ compte.actif }}" /></td>
                    <td class="text-center">
                        <div class="row">
                            <div class="col-xs-6">
                                <div class="row">
                                    <div class="col-xs-6 text-right">
                                        <span class="glyphicon glyphicon-file"></span>
                                    </div>
                                    <div class="col-xs-6 text-left">
                                        {{ contratManager.getNbContratWithCompteForCommercial(compte) }}
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="row">
                                    <div class="col-xs-6 text-right">
                                        <span class="glyphicon glyphicon-calendar"></span>
                                    </div>
                                    <div class="col-xs-6 text-left">
                                        {{ passageManager.getNbPassagesWithTechnicien(compte) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
