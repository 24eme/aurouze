{% set _menu_active = '' %}
{% extends 'base.html.twig' %}
{% block title %}Recherche avancée{% endblock title %}
{% block body %}

<h1>Recherche avancée</h1>

<hr />

<form action="{{ path('recherche') }}" method="get" class="form-horizontal">
	<div class="form-group">
		<label for="q" class="col-sm-2 control-label">Termes :</label>
		<div class="col-sm-10">
			<input type="text" name="q" class="form-control" id="q" />
		</div>
	</div>
	<div class="form-group">
    	<div class="col-sm-offset-2 col-sm-10">
			<button type="submit" class="btn btn-default">Chercher</button>
		</div>
	</div>
</form>

<hr />

<h1>{{ result|length }} Résultat{% if result|length > 1 %}s{% endif %} <small>{{ query }}</small></h1>

<table class="table table-striped table-hover">	
{% for item in result %}
<tr style="cursor: pointer;" onclick="document.location.href='{{ path('societe_visualisation', {'id': item.doc.societe.id}) }}'">
	<td>{{ item.instance }}<br /><small>{{ item.doc.identifiant }}</small></td>
	<td>
		<i class="mdi mdi-{{ item.doc.icon }} mdi-lg"></i>&nbsp;{{ item.doc.libelleComplet }}<br />
        <small>
            {% if (item.doc.contactCoordonnee.telephoneFixe or item.doc.contactCoordonnee.telephoneMobile or item.doc.contactCoordonnee.fax or item.doc.contactCoordonnee.email or item.doc.contactCoordonnee.siteInternet)  %}
                {% if (item.doc.contactCoordonnee.telephoneFixe is defined and item.doc.contactCoordonnee.telephoneFixe)%}
                	<i class="glyphicon glyphicon-earphone"></i>&nbsp;{{ item.doc.contactCoordonnee.telephoneFixe }}&nbsp;
                {%endif%}
                {% if (item.doc.contactCoordonnee.telephoneMobile is defined and item.doc.contactCoordonnee.telephoneMobile)%}
                    <i class="glyphicon glyphicon-phone"></i>&nbsp;{{ item.doc.contactCoordonnee.telephoneMobile }}&nbsp;
                {% endif %}
                {% if (item.doc.contactCoordonnee.fax is defined and item.doc.contactCoordonnee.fax)%}
                    <i class="glyphicon glyphicon-print"></i>&nbsp;{{ item.doc.contactCoordonnee.fax }}&nbsp;
                {% endif %}
                {% if(item.doc.contactCoordonnee.email is defined and item.doc.contactCoordonnee.email)%}
                	<i class="glyphicon glyphicon-envelope"></i>&nbsp;{{ item.doc.contactCoordonnee.email }}&nbsp;
                {% endif %}
                {% if(item.doc.contactCoordonnee.siteInternet is defined and item.doc.contactCoordonnee.siteInternet)%}
                	<i class="glyphicon glyphicon-globe"></i>&nbsp;{{ item.doc.contactCoordonnee.siteInternet }}&nbsp;
                {% endif %}
            {% else %}
            	<em class="text-muted">Aucune information de contact définie</em>
            {% endif %}
        </small>
	</td>
</tr>
{% endfor %}
</table>

{% endblock %}
